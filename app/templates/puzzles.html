<h2>Puzzles ({{ puzzles|count }})</h2>

<table class="table">
    <tr>
        <th>Title</th>
        <th>Published</th>
        <th>Index</th>
        <th>Books</th>
        <th>Links</th>
    </tr>
    {% for puzzle in puzzles|sort(attribute="date", reverse=true) %}
    <tr>
        <td><a href="/puzzle/{{ puzzle.id }}">{{ puzzle.title }}</a></td>
        <td>{{ puzzle.issue if puzzle.issue else puzzle.date }}</td>
        <td>{{ puzzle.pub }}#{{ puzzle.num }}</td>
        <td>{{ ", ".join(puzzle.books) if puzzle.books else "" }}</td>
        <td>
            {% if puzzle.web_link %}
            <a href="{{ puzzle.web_link }}" target="_puzzle">Web</a>{{ "," if puzzle.puzzle_link or puzzle.answer_link }}
            {% endif %}
            {% if puzzle.puzzle_link %}
            <a href="{{ puzzle.puzzle_link }}" target="_puzzle">Puzzle</a>{{ "," if puzzle.answer_link }}
            {% endif %}
            {% if puzzle.answer_link %}
            <a href="{{ puzzle.answer_link }}" target="_puzzle">Answer</a>
            {% endif %}
        </td>
    </tr>
    {% endfor %}
</table>
